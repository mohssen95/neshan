سیستم دریافت گزارش مسیریابی

توضیحات مسئله:
چند دسته کلی گزارش در برنامه‌های نقشه و مسیریاب وجود داره که کاربران مختلف در طول مسیر خود اقدام به ارسال این گزارش‌ها می‌کنن (مثلا گزارش ترافیک، تصادف و …). هر کدام از این گزارش‌ها مشخصه‌های خاصی دارن و در آینده مشخصه‌های جدیدی هم بهشون اضافه میشه، مثلا هر گزارش یک طول عمر پیش‌فرض داره که تعیین می‌کنه این گزارش از زمان فعال شدن تا x دقیقه بعدش فعال هست. یا بعضی از گزارش‌ها باید حتما به صورت اپراتوری بررسی شوند و بعد برای سایر کاربران منتشر شوند.

هدف اینه که این گزارش‌ها به همراه اطلاعات کاربر ارسال کننده گزارش، سمت سرور ذخیره بشن و همچنین گزارش‌های دریافتی تا زمانی که منقضی نشدن به کاربرانی که درخواست دریافت گزارش‌های فعال روی نقشه را دارن داده بشه. 

زمانی که یک کاربر، یک مسیریابی از نقطه a به b می‌گیره جئومتری مسیر خودش را به برنامه ارسال می‌کنه و ما باید گزارش‌های فعال موجود در طول مسیرش را به کاربر ارائه کنیم. منظور از گزارش‌های طول مسیر گزارش‌هایی که در شعاع ۱۰ متری خط مسیر کاربر قرار دارند است. به عنوان مثال جئومتری زیر که در فرمت WKT قرار دارد از سمت کاربر به برنامه ارسال می‌شود.
LINESTRING(51.4378 35.71678,51.43772 35.71681,51.43803 35.7174,51.43766 35.71753,51.43767 35.71755,51.43798 35.71821,51.43792 35.71823)

کاربرها می‌تونن گزارش‌ها رو لایک و یا دیسلایک کنن. هر تایید باید باعث افزایش مدت زمان فعال بودن گزارش بشه و هر عدم تایید باید به مقداری مشخص (تعیین شده در اطلاعات پایه نوع گزارش، مثلا ۲ دقیقه) از مدت زمان فعال بودن گزارش کسر کنه.

همان‌طور که گفته شد برای انتشار انواع خاصی از گزارش‌ها اپراتورها باید آن‌ها را تایید کنند، به همین دلیل باید امکاناتی برای لاگین و کارکرد اپراتورها نیز در نظر گرفته شود.

از شما می‌خوایم:
- تمامی جداول مورد نیاز مساله به همراه ارتباطات بین جداول را طراحی کنین.
- APIهای مورد نیاز مساله رو بنویسین.
- Unit Testهای لازم برای برنامه رو بنویسین.
- ریکوئست‌های curl برای فراخوانی و تست عملکرد APIها رو طراحی کنین.
- کوئری SQLای طراحی کنید که با استفاده از آن بتوان پرتصادف‌ترین ساعت شبانه‌روز را پیدا کنیم. 

در طراحی خود موارد زیر را رعایت کنین:
- باید جلوی ثبت گزارش‌های تکراری رو بگیریم. اگر یک کاربر گزارشی از یک نوع در همان مختصات قبلی و با اختلاف زمانی مخصوص هر نوع گزارش (مثلا ۲ دقیقه) ارسال کرد، به عنوان گزارش تکراری در نظر گرفته بشه و نباید در دیتابیس ذخیره بشه. در حل این چالش این نکته را هم در نظر بگیرین که ممکنه این سرویس اسکیل شده باشه و در لحظه چند نسخه از سرویس ما وجود داشته باشه و ریکوئست‌های ارسال گزارش بین این نسخه‌ها توزیع بشن.
- در طراحی سرویس‌ها می‌تونین از هر سیستم احراز هویت دلخواهی استفاده کنید.
- نیازی به ساخت UI برای برنامه وجود ندارد.

